<%= render 'layouts/application' %>

  <div class="content inner-page">
    <div class="container">

<% flash.each do |name, msg| %>
      <div class="">
        <h4 align="center" class="flash"><%= content_tag :div, msg, :id => "flash_#{name}" %>
        </h4>
      </div>
    <% end %>

      <div class="row">
        <h4><span><%= image_tag("line.png" , :alt => 'line.png') %></span>Edit Employee Page<span><!-- <img src="img/right.png"> -->
        <%= image_tag("right.png" , :alt => 'right.png') %>
        </span></h4>
        <span class="q1">Company will Edit employee of their team on this page.</span>

            <%= form_tag @staff_url, {:class => 'form-horizontal add-employee', :id => 'editStaff'} do %>
      <div class="form-group">
        <%= label_tag :first_name, 'First Name', :class => "control-label col-sm-2" %>
        <div class="col-sm-7">
          <%= text_field_tag :first_name, @staff_data.first_name, :class => 'form-control', :placeholder => 'Enter First Name', :required => 'required' %>
        </div>
      </div>
      <div class="form-group">
        <%= label_tag :last_name, 'Last Name', :class => "control-label col-sm-2", :required => 'required' %>
        <div class="col-sm-7">
          <%= text_field_tag :last_name, @staff_data.last_name, :class => 'form-control', :placeholder => 'Enter Last Name', :required => 'required' %>
        </div>
        
      </div>
      <div class="form-group">
        <%= label_tag :email, 'Email', :class => "control-label col-sm-2" %>
        <div class="col-sm-7">
          <%= email_field_tag :email, @staff_data.email, class:'form-control', :placeholder => 'Enter Email', :required => 'required' %>
        </div>
      </div>

        <div class="form-group">
        <%= label_tag :skills, 'Skills', :class => "control-label col-sm-2" %>
        <div class="col-sm-7">
          <%= text_field_tag :skills, @staff_data.skills, class:'form-control', :placeholder => 'Enter Skills', :required => 'required', :id =>'skilsComplete'%>
        </div>
      </div>

      <div class="form-group">
        <%= label_tag :availability, 'Availability', :class => "control-label col-sm-2" %>
        <div class="col-sm-7">
          <%= text_field_tag :availability, @staff_data.availability, class:'form-control', :placeholder => 'Enter Availability', :required => 'required' %>
        </div>
      </div>

      <div class="form-group">
        <%= label_tag :is_private, 'Is Private', :class => "control-label col-sm-2" %>
        <div class="col-sm-7">   
      		<%= select_tag "is_private", options_for_select([ "Select", "No", "Yes" ], @staff_data.is_private == true ? "Yes" : "No"), class: "form-control" %>
        </div>
      </div>

      <div class="form-group">
        <%= label_tag :qualification, 'Qualification', :class => "control-label col-sm-2" %>
        <div class="col-sm-7">
          <%= text_field_tag :qualification, @staff_data.qualification, class:'form-control', :placeholder => 'Enter Qualification', :required => 'required', :id =>'staffQualitication' %>
        </div>
      </div>

      <div class="form-group">
        <%= label_tag :experience, 'Experience', :class => "control-label col-sm-2" %>
        <div class="col-sm-7">
          <%= text_field_tag :experience, @staff_data.experience, class:'form-control', :placeholder => 'Enter Experience', :required => 'required' %>
        </div>
      </div>

         <div class="form-group">
        <%= label_tag :location, 'Location', :class => "control-label col-sm-2" %>
        <div class="col-sm-7">
          <%= text_field_tag :location,  @staff_data.location, class:'form-control', :placeholder => 'Enter Location', :required => 'required' %>
        </div>
      </div>

        <input type="hidden" name="company_id" value="<%= @current_user.id %>">
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <%= submit_tag "Update", :class => 'btn btn-default' %>
          <a href="/company_home" class="btn btn-default">Cancel</a>
        </div>
      </div>
      <% end %>

        </div>
      </div>
      
    </div>
     <% finalArr = [] 
         qualification = []

         @qualifications.each do |quff|
              qualification.push(quff.qualification)
         end
       %>
      <% @staff_data1.each do |staff| %>
      <%#= debug staff %>

       <% finalArr.push(staff.skill) %>
          <% #@singlearr =  staff.skills.split(",") 
            #qualification.push(staff.qualification)
          %>
            <% #@singlearr.each do |arr|  %>
             
            <% #end %>
        <% end %>
        
        <input type="hidden" id="hiddenComplete" value="<%= finalArr %>"> 
        <input type="hidden" id="hiddenQua" value="<%= qualification %>"> 


    <script type="text/javascript">

    $(document).ready(function () {
        $('#editStaff').validate();
      var autCompleteArr = [],
          autoQompleteQua = [];
      var autoCompleteData = $('#hiddenComplete').val()
          autoCompleteDataQua  = $('#hiddenQua').val()    ;
      if(autoCompleteData && autoCompleteData !='') {
        
        var newArr = autoCompleteData.split(',');
       $.each(newArr, function (index, value) {
        var newValue = value.replace(/[^a-z0-9\s]/gi, '');
        autCompleteArr.push(newValue);
       });

        var unique=autCompleteArr.filter(function(itm,i,a){
          return i==autCompleteArr.indexOf(itm);
      });
        //console.log('Here ', unique);
       $( "#skilsComplete" ).autocomplete({
        source: unique
       });
       $(".autoComplete").autocomplete({
        source: unique
       });
      }

        if(autoCompleteDataQua && autoCompleteDataQua !='') {
           var newArrQua = autoCompleteDataQua.split(',');
           $.each(newArrQua, function (index, value) {
            var newValueQa = value.replace(/[^a-z0-9\s]/gi, '');
            autoQompleteQua.push(newValueQa);
           });

            var uniqueQa = autoQompleteQua.filter(function(itm,i,a){
              return i==autoQompleteQua.indexOf(itm);
          });

            $("#staffQualitication").autocomplete({
              source: uniqueQa
           });
        }


    });
    </script>
    <%= render 'layouts/footer' %>